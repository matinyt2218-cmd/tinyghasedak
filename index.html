<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tiny Ghasedak</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Vazirmatn",sans-serif;}
body{
    background:linear-gradient(135deg,#2ab5ff 0%,#86e4ff 30%,#ffffff 80%);
    min-height:100vh;
    padding-bottom:120px;
}

/* header */
header{
    width:100%;background:rgba(0,90,160,0.45);
    backdrop-filter:blur(10px);
    padding:20px 15px 30px;text-align:center;color:white;
    border-bottom:2px solid rgba(255,255,255,0.3);
    position:relative;
}
header h1{font-size:24px;margin-bottom:10px;}
#topRight{
    position:absolute;top:15px;left:15px;
    display:flex;align-items:center;gap:8px;
    cursor:pointer;font-size:26px;
}
#cartCount{
    background:red;color:white;font-size:12px;
    padding:2px 6px;border-radius:50%;
}

/* search */
#search{
    width:85%;max-width:350px;padding:10px 15px;
    border-radius:12px;border:none;font-size:16px;
}

/* products */
#products{
    padding:20px;
    display:grid;gap:15px;
    grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
}
.item{
    background:white;padding:10px;border-radius:14px;
    box-shadow:0 4px 12px rgba(0,0,0,.15);
    cursor:pointer;transition:.3s;text-align:center;
}
.item:hover{transform:scale(1.05);}
.item img{width:100%;border-radius:12px;margin-bottom:8px;}

/* product page */
#productPage{
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:white;display:none;flex-direction:column;
    overflow-y:auto;z-index:10000;
}
#productInfo{padding:20px;}

/* Slider */
#sliderBox{
    position:relative;
    width:90%;
    margin:20px auto 10px;
}
#sliderBox img{
    width:100%;
    border-radius:18px;
    box-shadow:0 5px 18px rgba(0,0,0,0.25);
}
.sliderBtn{
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    background:rgba(0,0,0,0.5);
    color:white;border:none;
    font-size:22px;
    padding:8px 13px;border-radius:50%;
    cursor:pointer;
}
#prevBtn{right:10px;}
#nextBtn{left:10px;}

/* checkout small image */
#checkoutImg{
    width:70px;height:70px;border-radius:12px;object-fit:cover;
}

/* cart panel */
#cartPanel{
    position:fixed;
    top:0;
    left:-100%;
    width:300px;
    height:100vh;
    background:rgba(255,255,255,0.2);
    backdrop-filter:blur(18px);
    padding:20px;
    box-shadow:4px 0 15px rgba(0,0,0,0.25);
    transition:.35s;
    z-index:9999;
}
#cartItems{max-height:60vh;overflow-y:auto;margin-bottom:10px;}
.qtyBtn{
    padding:4px 10px;border:none;border-radius:6px;
    background:#2196f3;color:white;font-size:16px;cursor:pointer;
}
.totalBox{
    font-size:18px;font-weight:bold;margin:10px 0;
}

/* checkout modal */
#checkoutBox{
    position:fixed;top:50%;left:50%;
    transform:translate(-50%,-50%);
    background:white;padding:20px;
    width:85%;max-width:380px;
    border-radius:16px;
    box-shadow:0 6px 20px rgba(0,0,0,.3);
    display:none;z-index:100000;
}
</style>
</head>
<body>

<header>
    <h1>Tiny Ghasedak</h1>
    <input id="search" placeholder="Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø­ØµÙˆÙ„...">
    <div id="topRight">
        <span id="cartIcon">ğŸ›’</span>
        <span id="cartCount">0</span>
    </div>
</header>


<!-- Products -->
<div id="products">
    <div class="item" onclick="openProduct('Ø´Ø§Ù„ Ø±ÛŒØ² Ø¨Ø§ÙØª Ø·Ø±Ø­ Ø¯Ø§Ø±',285000,'Shal1.jpg')">
        <img src="Shal1.jpg"><p>Ø´Ø§Ù„ Ø±ÛŒØ² Ø¨Ø§ÙØª Ø·Ø±Ø­ Ø¯Ø§Ø±</p>
    </div>
    <div class="item" onclick="openProduct('Ø´Ø§Ù„ Ø¨Ø§ÙØª Ø±ÛŒØ²',285000,'Shal2.jpg')">
        <img src="Shal2.jpg"><p>Ø´Ø§Ù„ Ø¨Ø§ÙØª Ø±ÛŒØ²</p>
    </div>
    <div class="item" onclick="openProduct('Ø´Ø§Ù„ Ø§Ø³Ù„Ù¾ Ù¾ÛŒÚ¯Ù…Ù†Øª Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø±',235000,'Shal3.jpg')">
        <img src="Shal3.jpg"><p>Ø´Ø§Ù„ Ø§Ø³Ù„Ù¾ Ù¾ÛŒÚ¯Ù…Ù†Øª Ù…Ù†Ú¯ÙˆÙ„Ù‡ Ø¯Ø§Ø±</p>
    </div>
    <div class="item" onclick="openProduct('Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆÛŒÛŒ Û±',215000,'Shal4.jpg')">
        <img src="Shal4.jpg"><p>Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆÛŒÛŒ Û±</p>
    </div>
    <div class="item" onclick="openProduct('Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆÛŒÛŒ Û²',215000,'Shal5.jpg')">
        <img src="Shal5.jpg"><p>Ø´Ø§Ù„ Ù†Ø®ÛŒ Ú©Ù†Ø¯ÙˆÛŒÛŒ Û²</p>
    </div>
</div>


<!-- Product Page -->
<div id="productPage">

    <!-- SLIDER -->
    <div id="sliderBox">
        <button id="prevBtn" class="sliderBtn">â€¹</button>
        <img id="pImg">
        <button id="nextBtn" class="sliderBtn">â€º</button>
    </div>

    <div id="productInfo">
        <div style="display:flex;align-items:center;gap:10px;margin-bottom:10px;">
            <img id="checkoutImg">
            <div>
                <h2 id="pName"></h2>
                <p id="pPrice" style="margin:6px 0;font-size:18px;font-weight:bold;"></p>
            </div>
        </div>

        <button class="btn blue" onclick="addToCart()">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</button>
        <button class="btn red" onclick="closeProduct()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>
</div>


<!-- Cart Panel -->
<div id="cartPanel">
    <h3>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h3>
    <div id="cartItems"></div>

    <div class="totalBox">Ø¬Ù…Ø¹ Ú©Ù„:
        <span id="totalPrice">0</span> ØªÙˆÙ…Ø§Ù†
    </div>

    <button class="btn blue" onclick="openCheckout()">Ø§Ø¯Ø§Ù…Ù‡ â†’</button>
    <button class="btn red" onclick="closeCart()">Ø¨Ø³ØªÙ†</button>
</div>


<!-- Checkout Box -->
<div id="checkoutBox">
    <h3>Ø¬Ø²Ø¦ÛŒØ§Øª Ø®Ø±ÛŒØ¯</h3>
    <p id="checkoutDetails"></p>
    <button class="btn red" onclick="checkoutBox.style.display='none'">Ø¨Ø³ØªÙ†</button>
</div>


<script>
let cart = JSON.parse(localStorage.getItem("cart") || "[]");
updateCartCount();

/* -------- SEARCH -------- */
document.getElementById("search").addEventListener("input", function(){
    let val = this.value.toLowerCase();
    document.querySelectorAll(".item").forEach(p=>{
        if(p.innerText.toLowerCase().includes(val)) p.style.display="block";
        else p.style.display="none";
    });
});

/* -------- PRODUCT PAGE + SLIDER -------- */
let sliderIndex = 0;
let sliderImages = [];
let currentProduct = {};

function openProduct(name, price, img){
    currentProduct = {name, price, img, qty:1};

    sliderImages = [img, img, img];
    sliderIndex = 0;
    updateSlider();

    pName.innerText = name;
    pPrice.innerText = price.toLocaleString()+" ØªÙˆÙ…Ø§Ù†";
    checkoutImg.src = img;

    productPage.style.display = "flex";
}
function updateSlider(){
    pImg.src = sliderImages[sliderIndex];
    checkoutImg.src = sliderImages[sliderIndex];
}
nextBtn.onclick = ()=>{ sliderIndex=(sliderIndex+1)%sliderImages.length;updateSlider(); }
prevBtn.onclick = ()=>{ sliderIndex=(sliderIndex-1+sliderImages.length)%sliderImages.length;updateSlider(); }
function closeProduct(){ productPage.style.display="none"; }

/* -------- ADD TO CART -------- */
function addToCart(){
    let found = cart.find(p=>p.name===currentProduct.name);
    if(found) found.qty++;
    else cart.push({...currentProduct});

    saveCart();
    alert("Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ âœ”");
}

/* -------- CART FUNCTIONS -------- */
function saveCart(){
    localStorage.setItem("cart", JSON.stringify(cart));
    updateCartCount();
    loadCart();
}
function updateCartCount(){
    cartCount.innerText = cart.reduce((t,p)=>t+p.qty,0);
}

cartIcon.onclick = function(){
    loadCart();
    cartPanel.style.left = "0";
}
function closeCart(){
    cartPanel.style.left = "-100%";
}

function loadCart(){
    cartItems.innerHTML = "";

    if(cart.length === 0){
        cartItems.innerHTML = "<p>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</p>";
        totalPrice.innerText = "0";
        return;
    }

    let total = 0;

    cart.forEach((p,i)=>{
        total += p.price * p.qty;

        cartItems.innerHTML += `
            <div style="border-bottom:1px solid #ccc;padding:10px;">
                <strong>${p.name}</strong><br>
                Ù‚ÛŒÙ…Øª: ${p.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†<br>

                <div style="margin-top:6px;display:flex;align-items:center;gap:10px;">
                    <button class="qtyBtn" onclick="changeQty(${i},1)">+</button>
                    <span>${p.qty}</span>
                    <button class="qtyBtn" onclick="changeQty(${i},-1)">-</button>
                </div>

                <button onclick="removeItem(${i})" style="
                    margin-top:8px;padding:6px 12px;
                    background:#e20000;color:white;
                    border:none;border-radius:8px;cursor:pointer;">
                    Ø­Ø°Ù
                </button>
            </div>
        `;
    });

    totalPrice.innerText = total.toLocaleString();
}

function changeQty(i, val){
    cart[i].qty += val;
    if(cart[i].qty <= 0) cart.splice(i,1);
    saveCart();
}
function removeItem(i){
    cart.splice(i,1);
    saveCart();
}

/* -------- CHECKOUT BOX -------- */
function openCheckout(){
    if(cart.length === 0){ alert("Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª"); return; }

    let text = "";
    cart.forEach(p=>{
        text += `${p.name} â€” ${p.qty} Ø¹Ø¯Ø¯ â€” ${(p.qty*p.price).toLocaleString()} ØªÙˆÙ…Ø§Ù†<br>`;
    });

    checkoutDetails.innerHTML = text;
    checkoutBox.style.display = "block";
}
</script>

</body>
</html>
