<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tiny Ghasedak</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:"Vazirmatn",sans-serif;}

body{
    background:linear-gradient(135deg,#27b3ff 0%, #7ee8ff 45%, #ffffff 85%);
    min-height:100vh;
    padding-bottom:140px;
    overflow-x:hidden;
}

/* Ù‡Ø¯Ø± */
header{
    width:100%;
    background:rgba(0,110,190,0.55);
    backdrop-filter:blur(10px);
    padding:22px 15px 32px;
    text-align:center;
    color:white;
    border-bottom:2px solid rgba(255,255,255,0.3);
    position:relative;
}
header h1{font-size:24px;margin-bottom:12px;}

#topLeft{
    position:absolute;
    top:15px;
    left:15px;
    display:flex;
    gap:15px;
    font-size:26px;
    cursor:pointer;
}

#search{
    width:85%;
    max-width:350px;
    padding:10px 15px;
    border-radius:12px;
    border:none;
    background:white;
    font-size:16px;
}

/* Ù…Ø­ØµÙˆÙ„Ø§Øª */
#products{
    padding:20px 20px 60px;
    display:grid;
    gap:15px;
    grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
}
.item{
    background:white;
    padding:10px;
    border-radius:14px;
    box-shadow:0 4px 12px rgba(0,0,0,.15);
    cursor:pointer;
    transition:.25s;
    text-align:center;
}
.item:hover{transform:scale(1.05);}
.item img{width:100%;border-radius:12px;margin-bottom:8px;}

/* Ù…ÙˆØ¯Ø§Ù„ Ù…Ø­ØµÙˆÙ„ */
#modal{
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:rgba(0,0,0,.45);
    display:none;justify-content:center;align-items:center;
}
#modalContent{
    background:white;padding:20px;border-radius:14px;
    width:90%;max-width:350px;text-align:center;
    animation:pop .25s ease;
}
@keyframes pop{0%{transform:scale(.7);opacity:0;}100%{transform:scale(1);opacity:1;}}

#modalContent button{
    width:100%;
    padding:12px;
    margin-top:12px;
    border:none;
    border-radius:10px;
    font-size:16px;
    cursor:pointer;
    transition:.25s;
}
.btn-blue{background:#2196f3;color:white;}
.btn-blue:hover{background:#0d6cd6;}
.btn-red{background:#cc0000;color:white;}
.btn-red:hover{background:#a00000;}

/* Ù¾Ù†Ù„ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ */
#cartPanel{
    position:fixed;
    top:0;
    right:-400px;
    width:320px;
    height:100%;
    background:white;
    box-shadow:-5px 0 15px rgba(0,0,0,.3);
    transition:right .35s ease;
    padding:18px;
    z-index:999;
    overflow-y:auto;
}
#cartPanel.open{right:0;}

.cart-item{
    background:#f7f7f7;
    padding:10px;
    border-radius:10px;
    margin-bottom:12px;
    display:flex;
    align-items:center;
    gap:10px;
    position:relative;
}
.cart-item img{
    width:55px;height:55px;object-fit:cover;border-radius:8px;
}
.removeItem{
    position:absolute;
    top:6px;
    left:6px;
    cursor:pointer;
    font-size:18px;
    color:#d00000;
}

.qtyBox{
    display:flex;
    gap:10px;
    align-items:center;
}
.qtyBtn{
    width:28px;height:28px;
    border:none;border-radius:6px;
    background:#2196f3;color:white;
    cursor:pointer;font-size:18px;
    transition:.2s;
}
.qtyBtn:active{transform:scale(.9);}

#continueBtn{
    background:#2196f3;
    width:100%;
    padding:12px;
    border:none;border-radius:10px;
    color:white;font-size:16px;
    margin-top:15px;
    cursor:pointer;
}

/* Ø§ÙˆÙˆØ±Ù„ÛŒ checkout */
#overlay{
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:rgba(0,0,0,.45);
    display:none;justify-content:center;align-items:center;
    z-index:99999;
}

#checkoutBox{
    background:white;
    width:92%;
    max-width:380px;
    padding:20px;
    border-radius:16px;
    animation:pop .25s ease;
}

.checkout-item{
    display:flex;
    gap:12px;
    align-items:center;
    margin-bottom:15px;
}
.checkout-item img{
    width:70px;height:70px;border-radius:10px;object-fit:cover;
}
.sep{
    width:100%;
    height:1px;
    background:#cfcfcf;
    margin:18px 0;
    opacity:.5;
}

#backBtn{
    margin-top:12px;
    width:100%;
    padding:12px;
    background:#2196f3;
    border:none;
    color:white;
    border-radius:10px;
    font-size:16px;
    cursor:pointer;
}

</style>
</head>
<body>

<header>
    <h1>Tiny Ghasedak</h1>
    <input id="search" placeholder="Ø¬Ø³ØªØ¬Ùˆ..." oninput="searchProducts()">
    <div id="topLeft">
        <span onclick="toggleCart()">ğŸ›’</span>
    </div>
</header>

<div id="products"></div>

<!-- Ù…ÙˆØ¯Ø§Ù„ Ù…Ø­ØµÙˆÙ„ -->
<div id="modal" onclick="closeModal(event)">
    <div id="modalContent">
        <h3 id="modalTitle"></h3>
        <p id="modalPrice"></p>
        <button class="btn-blue" onclick="addToCart()">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</button>
        <button class="btn-red" onclick="hideModal()">Ø¨Ø³ØªÙ†</button>
    </div>
</div>

<!-- Ù¾Ù†Ù„ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ -->
<div id="cartPanel" onclick="event.stopPropagation()">
    <h3>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h3>
    <div id="cartItems"></div>
    <button id="continueBtn" onclick="openCheckout()">Ø§Ø¯Ø§Ù…Ù‡</button>
</div>

<!-- Ø§ÙˆÙˆØ±Ù„ÛŒ checkout -->
<div id="overlay" onclick="closeCheckout(event)">
    <div id="checkoutBox">
        <h3>Ø¬Ø²Ø¦ÛŒØ§Øª Ø®Ø±ÛŒØ¯</h3>
        <div id="checkoutItems"></div>
        <div class="sep"></div>
        <p id="totalPrice"></p>
        <p style="font-size:13px;margin-top:10px;color:#444;">
            Ø¬Ù‡Øª Ø§Ø¯Ø§Ù…Ù‡ ÙØ±Ø¢ÛŒÙ†Ø¯ Ø®Ø±ÛŒØ¯ Ø§Ø³Ú©Ø±ÛŒÙ†â€ŒØ´Ø§Øª Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø±Ø§ Ø¯Ø§Ø®Ù„ Ø¯Ø§ÛŒØ±Ú©Øª Ø§Ø±Ø³Ø§Ù„ Ú©Ù†ÛŒØ¯.
        </p>
        <button id="backBtn" onclick="hideCheckout()">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
    </div>
</div>

<script>
/* Ø¯Ø§Ø¯Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª */
const products=[
    {id:1,name:"Ø¹Ø±ÙˆØ³Ú© Ø®Ø±Ø³ Ù¾Ø´Ù…Ø§Ù„Ùˆ",price:120000,img:"https://i.imgur.com/OG6N2km.jpeg"},
    {id:2,name:"Ø¹Ø±ÙˆØ³Ú© Ø³Ù†Ø¬Ø§Ø¨",price:90000,img:"https://i.imgur.com/yDrtV2P.jpeg"},
    {id:3,name:"Ø¹Ø±ÙˆØ³Ú© Ø±ÙˆØ¨Ø§Ù‡ Ú©ÙˆÚ†ÙˆÙ„Ùˆ",price:110000,img:"https://i.imgur.com/hQGvV2p.jpeg"},
];

/* Ù†Ù…Ø§ÛŒØ´ Ù…Ø­ØµÙˆÙ„Ø§Øª */
const productsDiv=document.getElementById("products");
products.forEach(p=>{
    productsDiv.innerHTML+=`
    <div class="item" onclick="showModal(${p.id})">
        <img src="${p.img}">
        <h4>${p.name}</h4>
        <p>${p.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†</p>
    </div>`;
});

/* Ø¬Ø³ØªØ¬Ùˆ */
function searchProducts(){
    let val=document.getElementById("search").value.trim();
    let items=document.querySelectorAll(".item");
    items.forEach((box,i)=>{
        let name=products[i].name;
        box.style.display=name.includes(val)? "block":"none";
    });
}

/* Ù…ÙˆØ¯Ø§Ù„ */
let currentProduct=null;
function showModal(id){
    currentProduct=products.find(p=>p.id==id);
    modalTitle.innerText=currentProduct.name;
    modalPrice.innerText=currentProduct.price.toLocaleString()+" ØªÙˆÙ…Ø§Ù†";
    modal.style.display="flex";
}
function closeModal(e){
    if(e.target.id==="modal") modal.style.display="none";
}
function hideModal(){modal.style.display="none";}

/* Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ */
let cart=[];

function toggleCart(){
    cartPanel.classList.toggle("open");
}
document.body.addEventListener("click",e=>{
    if(!cartPanel.contains(e.target) && e.target!==document.querySelector("#topLeft span")){
        cartPanel.classList.remove("open");
    }
});

function addToCart(){
    let item=cart.find(x=>x.id==currentProduct.id);
    if(item) item.qty++;
    else cart.push({...currentProduct,qty:1});
    renderCart();
    hideModal();
    cartPanel.classList.add("open");
}

function renderCart(){
    cartItems.innerHTML="";
    cart.forEach(item=>{
        cartItems.innerHTML+=`
        <div class="cart-item">
            <span class="removeItem" onclick="removeItem(${item.id})">Ã—</span>
            <img src="${item.img}">
            <div>
                <p>${item.name}</p>
                <p>${item.price.toLocaleString()} ØªÙˆÙ…Ø§Ù†</p>
                <div class="qtyBox" onclick="event.stopPropagation()">
                    <button class="qtyBtn" onclick="changeQty(${item.id},1)">+</button>
                    <span>${item.qty}</span>
                    <button class="qtyBtn" onclick="changeQty(${item.id},-1)">-</button>
                </div>
            </div>
        </div>`;
    });
}

function changeQty(id,step){
    let item=cart.find(x=>x.id===id);
    if(!item) return;
    item.qty+=step;
    if(item.qty<=0) cart=cart.filter(x=>x.id!==id);
    renderCart();
}
function removeItem(id){
    cart=cart.filter(x=>x.id!==id);
    renderCart();
}

/* Checkout */
function openCheckout(){
    cartPanel.classList.remove("open");

    checkoutItems.innerHTML="";
    let total=0;

    cart.forEach(item=>{
        total+=item.qty*item.price;
        checkoutItems.innerHTML+=`
        <div class="checkout-item">
            <img src="${item.img}">
            <div>
                <p>${item.name}</p>
                <p>ØªØ¹Ø¯Ø§Ø¯: ${item.qty}</p>
                <p>${(item.price*item.qty).toLocaleString()} ØªÙˆÙ…Ø§Ù†</p>
            </div>
        </div>`;
    });

    totalPrice.innerText="Ø¬Ù…Ø¹ Ú©Ù„: "+total.toLocaleString()+" ØªÙˆÙ…Ø§Ù†";

    overlay.style.display="flex";
}

function closeCheckout(e){
    if(e.target.id==="overlay") overlay.style.display="none";
}
function hideCheckout(){overlay.style.display="none";}
</script>

</body>
</html>
